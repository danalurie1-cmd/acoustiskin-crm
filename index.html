<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified CRM Application</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles */
        body { font-family: 'Inter', sans-serif; }
        .sidebar { width: 280px; }
        .main-content { flex-grow: 1; }
        .app-header { box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .input-group label { font-weight: 500; font-size: 0.875rem; color: #4b5563; margin-bottom: 0.25rem; display: block; }
        .input-group input, .input-group select, .input-group textarea { width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.375rem; transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }
        .card-header { cursor: pointer; user-select: none; }
        .rotate-180 { transform: rotate(180deg); }
        .collapse-icon { transition: transform 0.3s ease-in-out; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen antialiased flex">

    <!-- Notification Bar -->
    <div id="notification" class="fixed top-4 right-4 z-50 p-3 hidden rounded-lg shadow-xl text-sm font-medium transition-all duration-300" role="alert"></div>

    <!-- Sidebar (Customer List) -->
    <aside class="sidebar bg-indigo-700 text-white flex flex-col h-screen fixed">
        <div class="p-6 text-2xl font-bold border-b border-indigo-600">
            CRM Core
        </div>
        <div class="p-6">
            <h3 class="text-sm font-semibold mb-2 text-indigo-300 uppercase tracking-wider">Navigation</h3>
            <nav>
                <a href="#" onclick="navigateTo('order-entry-view')" class="flex items-center p-3 rounded-lg hover:bg-indigo-600 transition-colors duration-150">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 4h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    Order Entry
                </a>
                <a href="#" onclick="navigateTo('profile-editor-view')" class="flex items-center p-3 rounded-lg hover:bg-indigo-600 transition-colors duration-150 mt-1">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h4a2 2 0 012 2v1"></path></svg>
                    Profile Editor
                </a>
            </nav>
        </div>
        
        <div class="p-6 pt-0 border-t border-indigo-600 mt-auto">
             <button id="newCustomerButton" class="w-full bg-indigo-500 hover:bg-indigo-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 shadow-md">
                + New Customer
            </button>
        </div>

        <div class="p-6 overflow-y-auto flex-grow">
            <h3 class="text-sm font-semibold mb-2 text-indigo-300 uppercase tracking-wider">Customers</h3>
            <ul id="customerList" class="space-y-1">
                <!-- Customer list items loaded here by JavaScript -->
                <li class="p-3 text-center text-gray-400">Loading customers...</li>
            </ul>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content flex flex-col ml-72 w-full">
        <!-- Header -->
        <header class="app-header bg-white p-4 flex justify-between items-center sticky top-0 z-10">
            <h1 class="text-xl font-bold text-gray-800">Customer: <span id="currentCustomerName" class="text-indigo-600">Select Customer</span></h1>
            <div class="flex items-center space-x-4">
                <button id="backToOrderButton" onclick="navigateTo('order-entry-view')" class="hidden bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg text-sm transition-colors">
                    Back to Order Entry
                </button>
                <button id="editCustomerButton" onclick="navigateTo('profile-editor-view')" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-colors">
                    Edit Customer Profile
                </button>
            </div>
        </header>

        <!-- --- Order Entry View (Defined in app.js for full implementation) --- -->
        <div id="order-entry-view" class="app-view p-6">
            <div class="max-w-7xl mx-auto">
                <h2 class="text-2xl font-extrabold text-gray-900 mb-6 border-b pb-2">New Order Placement</h2>
                <div id="customerStatusBar" class="p-2 font-semibold text-sm rounded-lg mb-4 bg-gray-200 text-gray-800">
                    Status: N/A
                </div>
                <!-- This section is dynamically generated or controlled by app.js -->
                <p class="text-gray-600">Loading order form...</p>
            </div>
        </div>

        <!-- --- Profile Editor View (Defined in app.js for full implementation) --- -->
        <div id="profile-editor-view" class="app-view p-6 hidden">
             <!-- This section is dynamically generated or controlled by app.js -->
             <p class="text-gray-600">Loading profile editor...</p>
        </div>

    </main>

    <!-- Load the JavaScript logic and Firebase connection -->
    <script type="module" src="app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"></script>
</body>
</html>
